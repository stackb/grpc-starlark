build --incompatible_enable_cc_toolchain_resolution

# for platform-appropriate cxxopts
common --enable_platform_specific_config

build:windows --cxxopt='/std:c++14'
build:windows --host_cxxopt='/std:c++14'
build:linux   --cxxopt='-std=c++14'
build:linux   --host_cxxopt='-std=c++14'
build:macos   --cxxopt='-std=c++14'
build:macos   --host_cxxopt='-std=c++14'
build:freebsd   --cxxopt='-std=c++14'
build:freebsd   --host_cxxopt='-std=c++14'

# https://github.com/bazelbuild/rules_go/pull/3390
build --incompatible_enable_cc_toolchain_resolution
build --protocopt=--experimental_allow_proto3_optional
build --client_env=CC=clang

